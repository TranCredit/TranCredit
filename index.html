<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Catálogo de Productos</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 20px;
      background-color: #f4f7fa;
      color: #333;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #authButtons button {
      padding: 8px 16px;
      margin-left: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      color: white;
    }
    #loginButton {
      background-color: #4a90e2;
    }
    #logoutButton {
      background-color: #e74c3c;
    }
    #loginSection {
      display: none;
      position: absolute;
      top: 60px;
      right: 20px;
      background: white;
      padding: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      border-radius: 8px;
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    form {
      margin-bottom: 30px;
    }
    input, button {
      margin: 5px 0;
      padding: 10px;
      font-size: 1em;
      display: block;
      width: 100%;
      max-width: 400px;
    }
    .product-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
    }
    .product {
      border: 1px solid #ccc;
      padding: 15px;
      border-radius: 8px;
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: transform 0.2s ease;
    }
    .product:hover {
      transform: translateY(-5px);
    }
    .product img {
      width: 100%;
      height: auto;
      max-height: 200px;
      object-fit: cover;
      border-radius: 4px;
    }
    .admin-buttons {
      margin-top: 10px;
    }
    .admin-buttons button {
      margin-right: 5px;
      padding: 5px 10px;
      font-size: 0.9em;
    }
    #adminSection {
      display: none;
    }
    #notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #4a90e2;
      color: white;
      padding: 12px 20px;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease, transform 0.4s ease;
      z-index: 9999;
    }
    #notification.show {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }
  </style>
</head>
<body>
  <header>
    <h1>Catálogo de Productos</h1>
    <div id="authButtons">
      <button id="loginButton" onclick="toggleLogin()">Login</button>
      <button id="logoutButton" onclick="logout()" style="display: none;">Cerrar sesión</button>
    </div>
  </header>

  <div id="loginSection">
    <h3>Iniciar sesión</h3>
    <input type="text" id="adminUser" placeholder="Usuario" required />
    <input type="password" id="adminPass" placeholder="Contraseña" required />
    <button onclick="login()">Ingresar</button>
  </div>

  <div id="adminSection">
    <div id="adminInfo">
      <strong>Bienvenido, Administrador</strong>
    </div>
    <form id="productForm">
      <input type="text" id="name" placeholder="Nombre del producto" required />
      <input type="text" id="description" placeholder="Descripción" required />
      <input type="file" id="image" accept="image/*" multiple />
      <button type="submit">Agregar producto</button>
    </form>
  </div>

  <h2>Lista de productos</h2>
  <div class="product-list" id="productList"></div>
  <div id="notification"></div>

  <script>
    const form = document.getElementById('productForm');
    const productList = document.getElementById('productList');
    const loginSection = document.getElementById('loginSection');
    const loginButton = document.getElementById('loginButton');
    const logoutButton = document.getElementById('logoutButton');
    let isLoggedIn = false;

    function toggleLogin() {
      loginSection.style.display = loginSection.style.display === 'block' ? 'none' : 'block';
    }

    function login() {
      const user = document.getElementById('adminUser').value;
      const pass = document.getElementById('adminPass').value;

      if (user === 'admin' && pass === '1234') {
        loginSection.style.display = 'none';
        document.getElementById('adminSection').style.display = 'block';
        loginButton.style.display = 'none';
        logoutButton.style.display = 'inline-block';
        isLoggedIn = true;
        localStorage.setItem('isLoggedIn', 'true');
        showNotification('Sesión iniciada con éxito.');
        reloadProducts();
      } else {
        showNotification('Credenciales incorrectas', '#e74c3c');
      }
    }

    function logout() {
      localStorage.removeItem('isLoggedIn');
      document.getElementById('adminSection').style.display = 'none';
      loginButton.style.display = 'inline-block';
      logoutButton.style.display = 'none';
      isLoggedIn = false;
      reloadProducts();
    }

    function saveProducts(products) {
      localStorage.setItem('productCatalog', JSON.stringify(products));
    }

    function loadProducts() {
      const data = localStorage.getItem('productCatalog');
      return data ? JSON.parse(data) : [];
    }

    function renderProduct(product, index) {
      const div = document.createElement('div');
      div.classList.add('product');
      div.innerHTML = `
        <img src="${product.image}" alt="${product.name}" />
        <h3>${product.name}</h3>
        <p>${product.description}</p>
      `;
      if (isLoggedIn) {
        const btns = document.createElement('div');
        btns.classList.add('admin-buttons');

        const editBtn = document.createElement('button');
        editBtn.textContent = 'Editar';
        editBtn.onclick = () => editProduct(index);

        const delBtn = document.createElement('button');
        delBtn.textContent = 'Eliminar';
        delBtn.onclick = () => deleteProduct(index);

        btns.appendChild(editBtn);
        btns.appendChild(delBtn);
        div.appendChild(btns);
      }
      productList.appendChild(div);
    }

    function reloadProducts() {
      productList.innerHTML = '';
      const products = loadProducts();
      products.forEach((p, i) => renderProduct(p, i));
    }

    function editProduct(index) {
      const products = loadProducts();
      const product = products[index];
      document.getElementById('name').value = product.name;
      document.getElementById('description').value = product.description;
      products.splice(index, 1);
      saveProducts(products);
      showNotification('Producto listo para editar.', '#27ae60');
      reloadProducts();
    }

    function deleteProduct(index) {
      if (!confirm('¿Estás seguro de que deseas eliminar este producto?')) return;
      const products = loadProducts();
      products.splice(index, 1);
      saveProducts(products);
      showNotification('Producto eliminado correctamente.', '#e74c3c');
      reloadProducts();
    }

    form.addEventListener('submit', function (e) {
      e.preventDefault();

      const name = document.getElementById('name').value;
      const description = document.getElementById('description').value;
      const imageInput = document.getElementById('image');
      const file = imageInput.files[0];

      const reader = new FileReader();
      reader.onload = function () {
        const product = {
          name: name,
          description: description,
          image: []
        };
        const existing = loadProducts();
        existing.push(product);
        saveProducts(existing);
        reloadProducts();
        form.reset();
      };
      reader.readAsDataURL(file);
    });

    function showNotification(message, bgColor = '#4a90e2') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.style.backgroundColor = bgColor;
      notification.classList.add('show');
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    if (localStorage.getItem('isLoggedIn') === 'true') {
      document.getElementById('adminSection').style.display = 'block';
      loginButton.style.display = 'none';
      logoutButton.style.display = 'inline-block';
      isLoggedIn = true;
    }

    window.addEventListener('click', function(event) {
      if (!loginSection.contains(event.target) && !loginButton.contains(event.target)) {
        loginSection.style.display = 'none';
      }
    });

    reloadProducts();
  </script>
</body>
</html>
